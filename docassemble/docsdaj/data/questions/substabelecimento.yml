metadata:
  title: Substabelecimento
---
features:
  javascript:
    - https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js
    - comum_validacao_cpf.js
---
objects:
  - colaboradores: DAList.using(object_type=Individual)
---
initial: True
code: |
  set_language('pt')
---
sections:
  - Dados do(a) Assistido(a)
  - Dados do Patrono
  - Checagem I
  - Dados do Colaborador
  - Checagem II
  - Impressão
---
section: Dados do(a) Assistido(a)
question: Substabelecimento
fields:
  - 'Nome do(a) Assistido(a):': nome_assistido
    datatype: string
    required: True
  - 'CPF do(a) Assistido(a):': num_cpf
  - 'Tipo de ação judicial:': tipo_acao
    datatype: string
    required: True
  - 'N° do processo:': num_autos
    required: True
  - 'Comarca:': cidade_comarca
    datatype: string
    required: True
  - 'Estado da Comarca:': estado_comarca
    datatype: dropdown
    choices:
    - AC
    - AL
    - AP
    - AM
    - BA
    - CE
    - DF
    - ES
    - GO
    - MA
    - MT
    - MS
    - MG
    - PA
    - PB
    - PR
    - PE
    - PI
    - RJ
    - RN
    - RS
    - RO
    - RR
    - SC
    - SP
    - SE
    - TO

    required: True
script: |
  <script type="text/javascript">
    $(document).ready(function(){
        $('#bnVtX2NwZg').mask('000.000.000-00', {reverse: true});
        });
        $("#bnVtX2NwZg").focusout(function() {
        $('#bnVtX2NwZg-error').remove()
        var campo_teste = $("#bnVtX2NwZg").val();
        if (campo_teste){
          var cpf_valido = CPF_valido(campo_teste)
          if (!cpf_valido) {
              console.log("CPF INVÁLIDO");
            $("#bnVtX2NwZg").val("");
            $('<span id="bnVtX2NwZg-error" class="da-has-error text-danger" style="">CPF Inválido</span>').insertAfter("#bnVtX2NwZg");
         }
         else {
          console.log("CPF VÁLIDO");
         }
  	    $('#bnVtX2F1dG9z').mask('0000000-00.0000.0.00.0000');
      });
    </script>
progress: 1
mandatory: True
---
section: Dados do Patrono
question: Insira os Dados do Patrono
fields:
  - 'Nome do Patrono(a):': nome_patrono_atual
    datatype: string
    required: True
  - 'UF da OAB do Patrono:': patrono_estadooab
    datatype: dropdown
    choices:
    - AC
    - AL
    - AP
    - AM
    - BA
    - CE
    - DF
    - ES
    - GO
    - MA
    - MT
    - MS
    - MG
    - PA
    - PB
    - PR
    - PE
    - PI
    - RJ
    - RN
    - RS
    - RO
    - RR
    - SC
    - SP
    - SE
    - TO
    default: MG
    required: True
  - 'OAB do Patrono(a):': patrono_numoab
    minlength: 6
    maxlength: 7
    validation messages:
       maxlength: |
         Formato inválido!
       minlength: |
         Formato inválido!
    required: True
script: |
  <script type="text/javascript">
    $(document).ready(function(){
        $('#cGF0cm9ub19udW1vYWI').mask('900.000', {reverse: true});
    });
  </script>
mandatory: True
---
mandatory: True
section: Checagem I
progress: 40
question: |
  #Confira os seus dados:
  Nome do assistido: ${ nome_assistido }
  Número de CPF do Assistido: ${ num_cpf }
  Juízo Competente: ${ juizo_competente  }
  Número dos Autos: ${ num_autos }
  Data de Assinatura: ${ data }
  Cidade da Assinatura: ${ cidade }
  Nome do Patrono: ${ nome_patrono_atual  }
  OAB do Patrono: ${ patrono_estadooab } ${ patrono_numoab  }
back button: True
back button label: |
  Ops, errei. Voltar
buttons:
  - Tudo certo! Ver documento: continue
---
include:
  - comum_colaborador.yml
---
section: Local e Data de Assinatura
question: Insira o Local e Data de Assinatura
fields:
  - 'Cidade:': cidade_assinatura
    datatype: string
    default: Belo Horizonte
    required: True
  - 'Data assinatutura:': data_assinatura
    datatype: date
    default: |
      ${ today(format='yyyy-MM-dd') }
    required: True
progress: 60
---
mandatory: True
section: Impressão
question: |
  Aqui está o seu documento!
attachment:
  name: Substabelecimento
  language: pt
  filename: ${ nome_assistido }-substabelecimento
  default: |
      ${ nome_assistido }
  docx template file: substabelecimento.docx
  valid formats:
    - pdf
    - docx

progress: 100

---
sections:
 - Dados iniciais
 - Dados do advogado
 - Dados do orientador
 - Local e data
 - Checagem
 - Impressão
---
features:
  navigation: vertical
  progress bar: True
  question back button: True
---